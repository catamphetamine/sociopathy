@import "/облик/вспомогательный.less";
@import "/облик/user icon.less";
@import "/облик/author_content_date.less";

@user_icon_size: @smaller_user_icon_size;

@user_picture_top: @AuthorContentDate_user_picture_top;
@user_picture_left: @AuthorContentDate_user_picture_left;

@inter_column_padding: @AuthorContentDate_inter_column_padding;
@author_column_left_padding: @AuthorContentDate_author_column_left_padding;
@author_column_right_padding: @AuthorContentDate_author_column_right_padding;
@author_column_width: @AuthorContentDate_author_column_width;
@message_bottom_padding: @AuthorContentDate_message_bottom_padding;
@author_icon_margin_left: @AuthorContentDate_author_icon_margin_left;
@time_column_padding: @AuthorContentDate_time_column_padding;
@time_column_width: @AuthorContentDate_time_column_width;

@top_padding: 0px;
@bottom_padding: 0px;
@user_icon_margin: 5px;

.breadcrumbs
{
	margin-bottom: 22px;
}

.messages_framework
{
	/* чтобы не схлопывались margin-ы */
	padding-bottom: 30px;
	
	> .older
	{
		text-align: center;
		white-space: nowrap;
		
		margin-top: 20px;
		
		height: 56px;
		
		.more_container
		{
			position: absolute;
			width: 100%;
			text-align: center;
			
			> div
			{
				margin: 0;
			}
		}
		
		> a
		{
		}
	}
	
	ul.messages_container
	{
		margin-bottom: 30px;
		
		> li
		{
			&.a_little_later
			{
				margin-top: 12px;
			}
			
			&.some_time_later
			{
				margin-top: 22px;
			}
			
			&.later
			{
				margin-top: 32px;
			}
			
			&.more_later
			{
				margin-top: 42px;
			}
			
			&.reasonably_later
			{
				margin-top: 62px;
			}
			
			&.much_later
			{
				margin-top: 100px;
			}
			
			&.a_little_later, &.some_time_later, &.later, &.more_later, &.reasonably_later, &.much_later
			{
				&:first-child
				{
					margin-top: 0;
				}
			}
			
			> .content_wrapper
			{
				> .content
				{		
					white-space: pre-wrap;
					word-wrap: break-word;
					
					p
					{
						text-indent: 0;
					}
				}
			}
		}
	}
	
	.typing
	{
		position: absolute;
		left: 4px;

		margin-left: 330px;
		padding-top: 7px;
		
		background-image: url('/картинки/пишет.gif');
		background-repeat: no-repeat;
		background-position: 0 11px;
		
		opacity: 0;
		
		> div
		{
			font-size: 16px;
			color: #7f7f7f;
			margin-left: 24px;
		}
	}
		
	#compose_message
	{
		position: fixed;
		bottom: 0;
		
		z-index: 1;
		
		width: 100%;
		
		background-color: white;
		
		/*
		article > p.tagged_hint
		{
			text-indent: 0;
		}
		*/
		
		article
		{
			margin-top: 15px;
			margin-bottom: 12px;
		}
		
		.visual_editor_tools .more
		{
			background-image: url('/картинки/писарь/снасти/кнопки/скрыть разширенное.png');
		}
		
		.visual_editor_tools .less
		{
			background-image: url('/картинки/писарь/снасти/кнопки/показать всё.png');
		}
	}
	
	.popup_menu_container.of_message_author
	{
		margin-top: @user_picture_top + 2 * @user_icon_size / 3;
		margin-left: @author_column_left_padding + @author_column_width - @user_picture_left;
	}
	
	.popup_menu_container.of_online_user
	{
		margin-top: 4 * @user_icon_size / 7;
		margin-left: 4 * @user_icon_size / 7;
	}
	
	#compose_message > article, .compose_message > article
	{
		padding-left: @author_column_left_padding + @author_column_width + @inter_column_padding;
		padding-right: @inter_column_padding + @time_column_width + @time_column_padding + @inter_column_padding;
		
		.hint /*, .tagged_hint */
		{
			color: #7f7f7f !important;
			/* margin: 0; */
		}
	}
	
	.scroll_down_to_new_messages
	{
		display: none;
	
		position: fixed;
		bottom: 20px;
		right: 20px;
		
		z-index: 1;
		
		cursor: pointer;
	}
	
	.visual_editor_tools_container
	{
		z-index: 0;
	}
		
	.who_is_connected_container
	{
		overflow: hidden;
		height: @top_padding + @user_icon_size + 2 * @user_icon_margin + 2 * 1 + @bottom_padding;
	
		margin-bottom: 5px;
		margin-top: 5px;
				
		> .who_is_connected_bar
		{
			position: relative;
			z-index: 0;
			
			&.sticky
			{
				z-index: 1;
			}
	
			> .who_is_connected 
			{
				margin-left: 5px;
				
				> li
				{
					position: relative;
					
					float: left;
					
					> a
					{
						float: left;
					}
				}
				
				> li
				{
					width: 32px + 2 * 1;
					height: 32px + 2 * 1;
				
					> a
					{
						width: 100%;
						height: 100%;
					}
				}
			}
				
			.background
			{
				position: absolute;
				top: 0;
				z-index: 0;
				
				width: 100%;
				height: @user_icon_size + 2 * 5 + 2 * 1;
				
				background-color: #ffffff;
				
				.css_transition_property(background-color);
				.css_transition_duration(400ms);
				.css_transition_easing(ease-in-out);
				
				opacity: 0.5;
			}
			
			.who_is_connected
			{
				position: relative;
				z-index: 2;
					
				margin-top: @top_padding;
				margin-bottom: @top_padding;
				
				padding: 0;
				
				overflow: hidden;
			
				list-style: none;
				text-indent: 0;
				
				.picture
				{
					background-image: url('/картинки/avatar/картинка с навершия.jpg');
				}
				
				li
				{
					display: inline-block;
					margin: @user_icon_margin;
						
					/*
					.user_offline_picture_glow
					{
						opacity: 1 !important;
					}
					*/
					
					a
					{
						display: inline-block;
						position: relative;
						
						border: 0;
						
						/* .beautiful_shadow_3(0px, 1px, 2px, 3px, 4px, 0.2); */
					}
				}
			}
			
			&.sticky
			{
				width: 100%;
				
				.who_is_connected
				{
					li
					{
						margin: 5px;
						
						.user_offline_picture_glow
						{
							display: none;
						}
						
						.picture
						{
							border-width: 1px;
							border-style: solid;
							border-color: #6f6f6f;
						}
					}
				}
				
				.background
				{
					background-color: #cfcfcf;
				}
			}
		}
	}
}

.messages_rich_formatting
{
	font-family: @messaging_font;
	font-size: @messaging_font_size;
	line-height: @messaging_font_line_height;
	
	> p
	{
		text-indent: 0;
	}
	
	> p, > p:last-child, > p:first-child
	{
		margin-top: 9px;
		margin-bottom: 9px;
	}
	
	> p:first-child
	{
	}
	
	.citation
	{
		padding: 0;
	}
}

body[mode="правка"] .messages_framework > .older a
{
	cursor: not-allowed;
}

body.jump_to_top_mouse_over
{	
	.messages_framework
	{
		.who_is_connected
		{
			margin-left: 25px !important;
		}
	}
}

@jump_to_start_or_end_size: 16px;

.messages_framework
{
	.pagination
	{
		display: none;
		
		position: fixed;
		
		left: 0;
		bottom: 0;
		right: 0;
		
		margin-left: @jump_to_top_width + @jump_to_start_or_end_size + 1px + 1px + 1px;
		margin-right: @jump_to_top_width + @jump_to_start_or_end_size;
		
		z-index: 1;
		
		.whole
		{
			position: absolute;
			bottom: 0;
			
			height: @jump_to_start_or_end_size;
			width: 100%;
			
			margin-left: -2px;
			z-index: 1;
			
			border-top-width: 1px;
			
			border-left-width: 1px;
			border-right-width: 1px;
				
			.current
			{
				position: absolute;
				left: 0;
			
				height: 100%;
				
				border-width: 0px;
				border-left-width: 1px;
				border-right-width: 1px;
				
				border-color: #cacaca;
				border-style: solid;
				
				cursor: default;
			}
		}
		
		.start, .end
		{
			width: @jump_to_start_or_end_size;
			height: @jump_to_start_or_end_size;
		}
		
		.whole, .start, .end
		{
			background-color: #efefef;
			opacity: 0.8;
			
			border-color: #cacaca;
			border-style: solid;
			
			border-bottom-width: 0px;
			
			cursor: pointer;
			
			.css_transition(opacity, 100ms);
			
			&:hover
			{
				opacity: 0.9;
			
				.css_transition(opacity, 0);
			}
			
			&:active
			{
				opacity: 1;
			
				.css_transition(opacity, 0);
			}
		}
		
		.start, .end
		{
			position: absolute;
			bottom: 0;
		}
		
		.start
		{
			left: -@jump_to_start_or_end_size - 1px - 1px - 1px;
			
			border-top-width: 1px;
			
			border-left-width: 1px;
			border-right-width: 0px;
		}
		
		.end
		{
			right: -@jump_to_start_or_end_size - 1px;
			
			border-top-width: 1px;
			
			border-left-width: 0px;
			border-right-width: 1px;
		}
		
		
		.whole .current, .start:hover, .end:hover
		{
			background-color: #99c7f1;
		}
		
		.start:hover
		{
			background-image: url('/картинки/pagination/start.png')
		}
		
		.end:hover
		{
			background-image: url('/картинки/pagination/end.png')
		}
		
		&.smooth
		{
			.current
			{
				.css_transition(left, 300ms);
			}
		}
	}
}