<html>
	<head>
		<title>Communicate between tabs</title>
	</head>
	
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="communicate between tabs.js"></script>
	
	<script>
		$(function()
		{
			var chat = []
			
			function on_chat(data)
			{
				chat.push(data.message)
				
				$('.chat').text('Chat: «' + chat.join('», «') + '»')
			}
			
			Communicate_between_tabs.on('new_tab_opened', function(data)
			{
				on_chat(data)
			})
			
			Communicate_between_tabs.on('tab_closed', function(data)
			{
				on_chat(data)
			})
		
			var name = Math.random()
			
			$('.id').text('This is tab No ' + name)
		
			Communicate_between_tabs.send('new_tab_opened', { message: 'Hello there, my name is ' + name })
			
			$(window).on('beforeunload', function()
			{
				Communicate_between_tabs.send('tab_closed', { message: 'Goodbye there, my name was ' + name })
			})
		})
	</script>
	
	<body>
		<p>
			Warning: you can only run this example from your webserver, you can't run it by double clicking the html file.
		</p>
		
		<p class="id"></p>
		
		<p class="chat"></p>
	</body>
</html>